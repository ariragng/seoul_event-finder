<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seoul Event Finder</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">

    <!-- Flask ÌÖúÌîåÎ¶ø Ï†úÍ±∞, Ïã§Ï†ú ÌååÏùº Í≤ΩÎ°ú ÏÇ¨Ïö© -->
    <link rel="stylesheet" href="static/style.css">
</head>
<body>

    <div id="input-section" class="main-container py-5 d-flex justify-content-center align-items-center">
        <div class="card shadow-lg mx-3">
            <div class="card-body text-center">
                <h1 class="card-title mb-3">üéâ Seoul Event Finder</h1>
                
                <p class="new-guide-text mb-4">
                    Upload your photo to discover cultural events in Seoul near you!
                </p>

                <p class="text-light blue-text">Put Your Image!</p>
                
                <input type="file" id="photoInput" accept="image/*" class="form-control mt-3" />
                <label for="photoInput" class="btn btn-primary mt-2" id="fileLabel">Choose File</label>
                
                <p class="text-light blue-text mt-4">Choose your DATE to SEARCH!</p>
                <input type="date" id="dateInput" class="form-control" />
                
                <button id="searchButton" class="btn btn-success mt-3" disabled>Search</button>
            </div>
        </div>
    </div>

    <div id="results-section" class="container-fluid py-5 d-none">
        <div class="row h-100 justify-content-center"> 
            <div class="col-md-3 d-flex flex-column align-items-center">
                <img id="result-photo" class="result-img mb-3" alt="Uploaded photo preview" />
                <div class="info-box">
                    <p><b>Description:</b> <span id="displayDescription">N/A</span></p>
                    <p><b>Date:</b> <span id="displayDate"></span></p>
                    <p><b>Location:</b> <span id="displayLocation"></span></p>
                </div>
                <button id="goBackButton" class="btn btn-secondary mt-3 w-100">
                    ‚Üê Go Back
                </button>
            </div>

            <div class="col-md-7 results-content">
                
                <div id="map-container" style="height: 80%; min-height: 400px; margin-bottom: 1rem;">
                    <div id="map" style="width:100%; height:100%; border-radius: 8px;"></div>
                </div>

                <p class="new-guide-text text-center mt-0 mb-1">
                    Please note that the map does not support English. We apologize for any inconvenience.
                </p>

                <p class="new-guide-text text-center mt-0 mb-3">
                    Tip: You can zoom in/out the map using the mouse scroll wheel.
                </p>
                
                <div id="detail-wrapper" class="d-flex justify-content-between align-items-center" style="height: 20%; min-height: 150px;">
                    
                    <button id="prevEventButton" class="nav-button prev-btn btn btn-light shadow-sm me-2">
                        &lt;
                    </button>
                    
                    <div id="event-detail" class="flex-grow-1 p-3 shadow-sm" style="color: #333; max-height: 180px; overflow-y: auto;">
                        <p class="mb-0 text-muted">Check the nearby events on the map.</p>
                    </div>

                    <button id="nextEventButton" class="nav-button next-btn btn btn-light shadow-sm ms-2">
                        &gt;
                    </button>
                </div>

                <div id="pagination-container" class="mt-2 shadow-sm" style="background-color: transparent !important; border-radius: 8px;">
                    <div id="pagination-buttons" class="d-flex justify-content-center flex-wrap">
                        </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="gpsErrorModal" tabindex="-1" aria-labelledby="gpsErrorModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-danger" id="gpsErrorModalLabel">üö® GPS Data Missing</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-dark">
                    <p>The uploaded photo does not contain GPS location data.</p>
                    <p class="fw-bold">To use the location-based search feature, please allow camera location settings on your device:</p>
                    
                    <ul class="list-unstyled">
                        <li><strong>iOS:</strong> Settings &rarr; Privacy &amp; Security &rarr; Location Services &rarr; Camera &rarr; 'While Using the App'</li>
                        <li><strong>Android:</strong> Settings &rarr; Apps &rarr; [Camera App Name] &rarr; Permissions &rarr; Location &rarr; 'Allow only while using the app'</li>
                    </ul>
                    <p class="small text-muted mb-0">The 'Search' button will remain disabled until a valid photo (with GPS) and a date are selected.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=62f42e057e55c9f46e3a14e8479dba6d&libraries=services"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/exif-js"></script>

    <!-- Flask url_for Ï†úÍ±∞, Ïã§Ï†ú ÌååÏùº Í≤ΩÎ°ú ÏÇ¨Ïö© -->
    <script src="static/script.js?v=7"></script>
</body>
</html>
